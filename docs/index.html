<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>æµ·è±¹æ—‹è½‰æŒ¯å‹• + æ‹‹ç‰©ç·šğŸ’© + æ”¾å±éŸ³æ•ˆ + é‡ç½®</title>
  <style>
    /* è®“æ•´é ç½®ä¸­ */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #fafafa;
    }

    /* å¤–å±¤å®¹å™¨: åŒæ™‚æ”¾ç½®ã€Œå‹•æ…‹å½©è™¹æŒ‰éˆ•ã€èˆ‡ã€Œæµ·è±¹ã€ */
    .wrapper {
      position: relative;
      width: 250px; /* æŒ‰éˆ•å¯¬åº¦ */
      height: 80px; /* æŒ‰éˆ•é«˜åº¦ */
    }

    /* ===== å½©è™¹æŒ‰éˆ•: åªå‘ˆç¾å½©è™¹é‚Šæ¡† + Glow æ•ˆæœ ===== */
    .rainbow-button {
      position: absolute; 
      top: 0; 
      left: 0;
      width: 100%;
      height: 100%;
      border: none;       
      background: transparent;  /* é€æ˜ (æˆ–å¯æ”¹ç™½è‰²) */
      border-radius: 9999px;    /* æ©¢åœ“å½¢ */
      cursor: pointer;
      z-index: 0;               /* åœ¨æµ·è±¹ä¸‹æ–¹ */
      outline: none;
    }
    /* ä½¿ç”¨å½å…ƒç´  ::before è£½ä½œå‹•æ…‹å½©è™¹é‚Šæ¡† */
    .rainbow-button::before {
      content: "";
      position: absolute;
      top: 0; 
      left: 0; 
      right: 0; 
      bottom: 0;
      border-radius: inherit; /* èˆ‡æœ¬é«”åŒæ¨£æ©¢åœ“è§’ */
      padding: 3px;           /* è¾¨è­˜ã€Œæ¡†ã€çš„åšåº¦ */

      /* å½©è™¹æ¼¸å±¤ (å–®å‘å‘å³æµå‹•) */
      background: linear-gradient(to right,
        red, orange, yellow, green, blue, indigo, violet
      );
      background-size: 200% 100%;
      animation: rainbowFlow 3s linear infinite;

      /* åªç•™ä¸‹ã€Œé‚Šæ¡†ã€å€åŸŸ (ä¸­é–“æŒ–ç©º) */
      -webkit-mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
              mask-composite: exclude;

      /* ç™¼å…‰æ•ˆæœ (Glow) */
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.7);
    }
    /* å½©è™¹å¾å·¦å‘å³ä¸æ–·æµå‹•ï¼ˆå–®å‘ï¼‰ */
    @keyframes rainbowFlow {
      0% {
        background-position: 0% 0%;
      }
      100% {
        background-position: 100% 0%;
      }
    }

    /* æŒ‰éˆ•è¢«é»æ“Šå¾Œçš„ã€Œæ”¾å¤§ + æ·¡å‡ºã€å‹•ç•« */
    @keyframes scaleAndFadeBtn {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      100% {
        transform: scale(1.4);
        opacity: 0;
      }
    }
    .fade-out {
      animation: scaleAndFadeBtn 1s forwards;
    }

    /* ===== æµ·è±¹éƒ¨åˆ† (ä¸‰å±¤) ===== */
    .seal-outer {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1; /* åœ¨æŒ‰éˆ•ä¸Šæ–¹ */
    }
    /* seal-shake: è² è²¬æŠ–å‹•å‹•ç•« (é¿å… transform è¦†è“‹ç½®ä¸­) */
    .seal-shake {
      display: inline-block;
    }
    /* seal-inner: è² è²¬æ—‹è½‰ + æ”¾å¤§ */
    .seal-inner {
      display: inline-block;
      transform-origin: center center;
      font-size: 40px;   /* Emojiå¤§å° */
    }

    /* æ—‹è½‰ + æ”¾å¤§ (1â†’2) åœ¨ 3ç§’å…§ + 360åº¦ */
    @keyframes spinAndGrow {
      0% {
        transform: scale(1) rotate(0deg);
      }
      100% {
        transform: scale(2) rotate(360deg);
      }
    }
    .spin-and-grow {
      animation: spinAndGrow 3s forwards;
    }
    /* ä¸æ–·æŠ–å‹• */
    @keyframes shake {
      0%, 100% { transform: translate(0, 0); }
      10%, 30%, 50%, 70%, 90% { transform: translate(-5px, 0); }
      20%, 40%, 60%, 80% { transform: translate(5px, 0); }
    }
    .shaking {
      animation: shake 0.1s infinite;
    }

    /* ===== ğŸ’© æ‹‹ç‰©ç·šå‹•ç•« ===== */
    .poop-emoji {
      position: absolute;
      font-size: 30px;   /* å¤§å°å¯è‡ªè¡Œèª¿æ•´ */
      left: 40px;        /* å¤§ç´„åœ¨æµ·è±¹å³ä¸‹è§’ (å¯è‡ªè¡Œå¾®èª¿) */
      top: 10px;
      animation: poopFly 1.5s forwards; /* æ‹‹ç‰©ç·š 1.5 ç§’ */
    }
    @keyframes poopFly {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      50% {
        transform: translate(75px, -40px) scale(1.2); /* ä¸­é€”å¾€ä¸Šæ‹‹ */
      }
      100% {
        transform: translate(150px, 50px) scale(0.8); /* çµå°¾å¾€å³ä¸‹ */
        opacity: 0;
      }
    }
  </style>
</head>
<body>

<div class="wrapper">
  <!-- RGB & Glow æŒ‰éˆ• -->
  <button class="rainbow-button" id="rainbowBtn"></button>

  <!-- æµ·è±¹ (ä¸‰å±¤)ï¼šouterå®šä½ï¼Œshakeè² è²¬æŠ–å‹•ï¼Œinnerè² è²¬æ—‹è½‰æ”¾å¤§ -->
  <div class="seal-outer">
    <div class="seal-shake" id="sealShake">
      <div class="seal-inner" id="sealInner">ğŸ¦­</div>
    </div>
  </div>
</div>

<!-- æ”¾å±è²éŸ³æ•ˆï¼Œè«‹æ”¹æˆä½ æœ‰çš„ mp3 æˆ–å¤–éƒ¨URL -->
<audio id="fartSound" src="fart.mp3"></audio>

<script>
  const rainbowBtn = document.getElementById('rainbowBtn');
  const sealShake  = document.getElementById('sealShake');
  const sealInner  = document.getElementById('sealInner');
  const fartSound  = document.getElementById('fartSound');

  // é»æ“Šæµ·è±¹æ™‚è§¸ç™¼
  sealInner.addEventListener('click', () => {
    // 1. æŒ‰éˆ•æ·¡å‡º + æ”¾å¤§ (1 ç§’)
    rainbowBtn.classList.add('fade-out');
    
    // 2. æµ·è±¹é–‹å§‹æ—‹è½‰ (3 ç§’, 1â†’2å€) ä¸¦æŠ–å‹•
    sealShake.classList.add('shaking');
    sealInner.classList.add('spin-and-grow');

    // 3. 3ç§’å¾Œåœæ­¢æŠ–å‹•
    setTimeout(() => {
      sealShake.classList.remove('shaking');
    }, 3000);

    // 4. ç¬¬4ç§’ï¼šæµ·è±¹ç¬é–“æ”¾å¤§åˆ° 5 å€ï¼Œæ’­æ”¾å±è² + å™´å‡º ğŸ’© (æ‹‹ç‰©ç·š)
    setTimeout(() => {
      // (a) æ”¾å¤§åˆ° 5 å€
      sealInner.style.transform = 'scale(5)';

      // (b) æ’­æ”¾æ”¾å±éŸ³æ•ˆ
      fartSound.play().catch(err => {
        console.warn("éŸ³æ•ˆç„¡æ³•è‡ªå‹•æ’­æ”¾ï¼š", err);
      });

      // (c) ç”¢ç”Ÿ ğŸ’© emoji
      const poop = document.createElement('div');
      poop.classList.add('poop-emoji');
      poop.textContent = 'ğŸ’©';

      // åŠ åˆ° seal-outer å…§ï¼Œè®“å®ƒç›¸å°æµ·è±¹åšçµ•å°å®šä½
      document.querySelector('.seal-outer').appendChild(poop);

      // (d) ç­‰ poop å‹•ç•«çµæŸå¾Œï¼šç§»é™¤ poopï¼Œä¸¦ã€Œé‡ç½®ã€æµ·è±¹å’ŒæŒ‰éˆ•åˆ°åˆå§‹ç‹€æ…‹
      poop.addEventListener('animationend', () => {
        // 1. ç§»é™¤ ğŸ’©
        poop.remove();

        // 2. ç§»é™¤ æŒ‰éˆ•æ·¡å‡º classï¼Œä¸¦é‡ç½®å‹•ç•«é€ æˆçš„æ¨£å¼
        rainbowBtn.classList.remove('fade-out');
        rainbowBtn.style.animation = 'none';
        rainbowBtn.style.opacity   = '1';
        rainbowBtn.style.transform = 'none';

        // è®“ç€è¦½å™¨å¼·åˆ¶ reflow (å¯é¸) ä»¥ç¢ºä¿ç‹€æ…‹é‡ç½®
        // rainbowBtn.offsetWidth; // è‹¥éœ€è¦å¯é–‹å•Ÿ

        // 3. ç§»é™¤æµ·è±¹çš„å‹•ç•« classã€é‡ç½® transform
        sealInner.classList.remove('spin-and-grow');
        sealInner.style.transform = '';
      });
    }, 4000);
  });
</script>

</body>
</html>
